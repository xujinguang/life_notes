# Google运维解密

## 拥抱风险，管理风险
1. 不要追求100%的可靠服务，带来成本增长和限制开发速度
2. SRE旨在寻求快速创新和高效的服务运营业务之间的风险的平衡
3. 我们会努力提高一项服务的可靠性，但不会超过该服务需要的可靠性。
4. 可量化指标：可用性停机时间，请求成功率

## 服务质量目标
1. 如果不详细了解服务中各种行为的重要程度，并且不去度量这些行为的正确性的话，就无法正确运维这个系统，更不要说可靠地运维了
2. SLI/SLA/SLO
    1. SLI - 错误率，吞吐量；在某一个度量时间范围内将原始数据收集起来，计算速率、平均值、百分比等汇总数据。
    2. SLO - 服务的某个SLI的目标值，或者目标范围;SLI≤目标值，或者范围下限≤SLI≤范围上限; 比如RPC请求耗时<100ms
    3. SLA - 指服务与用户之间的一个明确的，或者不明确的协议，描述了在达到或者没有达到SLO之后的后果，比如财务退款或者罚款
3. 经验
    1. 过多过少都不好；过多会干扰真正的指标；过少又起不到作用；四五个具有代表性的指标对系统健康程度的评估和关注就足够了
    2. 可用性、延迟，以及吞吐量：是否能正常处理请求？每个请求花费的时间是多少？多少请求可以被处理？
    3. 延迟、可用性和数据持久性
    4. 吞吐量和端到端延迟
    5. 正确性
4. 数据处理
    1. 收集->汇总
    2. 以一个松散的目标开始，逐渐收紧

## 减少琐事
1. 如果系统正常运转中需要人工干预，应该将此视为一种Bug。
2. 什么是琐事？琐事就是运维服务中手动性的，重复性的，可以被自动化的，战术性，没有持久价值的工作。
3. 是否需要主观性
4. 不超过50%，可以通过值班计算，比如每人只有一天关注值班事项。1/5=20%
5. 琐事的坏处：职业停滞，士气低落，造成误解，进展缓慢，开创先例，促进摩擦，违法承诺
6. 让我们多创新，少干琐事吧！

## 分布式系统监控
1. 4个黄金指标分别是延迟、流量、错误和饱和度 
1. 每当收到紧急警报时，应该立即需要我进行某种操作。每天只能进入紧急状态几次，太多就会导致“狼来了”效应。
2. 每个紧急警报都应该是可以具体操作的。
3. 每个紧急警报的回复都应该需要某种智力分析过程。如果某个紧急警报只是需要一个固定的机械动作，那么它就不应该成为紧急警报。
4. 每个紧急警报都应该是关于某个新问题的，不应该彼此重叠。