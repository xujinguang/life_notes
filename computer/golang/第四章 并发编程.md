## 并发编程

### GMP模型

GMP是Goroutine，Machine，Processor 的缩写，可以翻译成协程-线程-执行器。

#### 1. Goroutine

协程对象，类似于Linux的进程控制块，它是一个数据结构实例，用来存储协程要执行的函数，参数，上下文（栈和寄存器），是协程的抽象。在编程时，使用go则创建一个这样的数据结构，并会将此结构放入全局的g队列中。为什么是g是全局的，因为这样递归创建协程之间并没有依赖关系，是同等的，全部隶属于全局main。

#### 2. Machine

线程，执行协程函数的协程。它使用的是goroutine中的栈和寄存器值，当被调度的时候恢复或者保存协程上下文信息。

#### 3. Processor

处理器，不是真正的CPU，而是系统的线程，P/M绑定，才能构成一个执行单元。一般使用GOMAXPROCS设置和CPU核数相等的系统线程个数。保证最大并行度。

